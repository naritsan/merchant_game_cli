# 変更内容の概要

## 1. メインメニューのナビゲーション不具合の修正
- **MainMenuScreen.tsx**: 
  - サブメニュー（行動、システム、デバッグ）や「休む」メニューに遷移できない問題を解決しました。
  - モード管理ロジックを簡素化し、漢字に変更したメニュー項目の判定を安全なインデックスベースに変更しました。

## 2. 「定価」表示の制限
- **SellShopScreen.tsx**, **ShopSetupScreen.tsx**, **InventoryScreen.tsx**:
  - 通常プレイ中、商品の「定価」や「価値」が表示されないようにしました。
  - デバッグモード（客の予算表示表示）がONの時のみ表示されるように制限しました。

## 3. 販売画面（SellShopScreen）の不具合修正と改善
- **useSellShopState.ts**:
  - 客待ち状態でEnterキーを押した際に次の客が来ない問題を修正しました。
  - 以前のコード適用ミス（omitted codeコメントによるロジック消失）を復元しました。
- **客の来店ロジックの改善**:
  - 各客に「好みの商品リスト」を設定し、常に陳列商品を欲しがるのではなく、好みの中からランダムに選ぶようにしました。
  - 希望の商品が陳列されていない場合、商談（売る・値引き）を制限し、「断る」のみ選択可能にしました。

## 4. 表記の日本語化
- **useGameState.ts**, **SellShopScreen.tsx**, **useSellShopState.ts**:
  - デフォルトの商人名を `Merchant` から `商人` に変更しました。
  - 不明な客の表記を `Customer` から `客` に変更しました。

## 5. 閉店ルールの強化と確認ダイアログ
- **18時強制閉店**: 18時以降は自動的に閉店するようにし、17時30分以降の接客終了時に通知を出すようにしました。
- **閉店確認ダイアログ**: 「店を閉じる」コマンド実行時に確認画面を表示し、誤操作を防ぐようにしました。

## 6. 販売画面での仕入れ価格表示
- **SellShopScreen.tsx**: 
  - 陳列リストに売値と併記して `[仕入れ値]` を表示するようにしました。
  - 値引き交渉画面でも `(仕入: 〇〇 G)` を表示し、損益の判断をしやすくしました。

## 7. その他
- 全体的な漢字化の適用漏れや、多言語対応に伴う表示崩れの微調整を行いました。
